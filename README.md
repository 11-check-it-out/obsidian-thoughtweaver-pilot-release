# ThoughtWeaver Pilot for Obsidian

**ThoughtWeaver Pilot** 是一款旨在将 [KG 笔记法](https://publish.obsidian.md/ryooo/G_%E6%96%87%E5%8C%96%E3%80%81%E7%A7%91%E5%AD%A6%E3%80%81%E6%95%99%E8%82%B2%E3%80%81%E4%BD%93%E8%82%B2/KG%E7%AC%94%E8%AE%B0%E6%B3%95%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B)（知识图谱笔记法）的理念无缝融入 Obsidian 工作流的智能插件。它通过提供一系列AI驱动的智能命令和快捷操作，帮助你专注于知识的连接与构建，而非繁琐的笔记维护。

> 🚀 **最新版本 v1.7.0** 新增AI智能别名功能，基于叙词法标准为笔记标题生成专业别名建议，让你的知识管理更加精准高效！

## 核心理念

KG 笔记法的核心思想很简单：**知识要么是讲述某个“概念”的，要么是讲述概念之间“关系”的。**

- **概念笔记 (Concept Note)**: 知识的基本单元，如同维基百科的词条，聚合与某一“名词”（如理论、人物、术语）相关的所有信息。
- **关系笔记 (Relation Note)**: 用来详细阐述两个或多个概念之间是如何相互作用的，如同将独立的词条串联成一个有逻辑的故事。

本插件的所有功能都围绕着如何高效、自动地创建、链接并管理这两类笔记而设计。

## ✨ 功能特性

本插件的设计思路基于我的个人专利，因此部分专属功能需要你的支持！

### 🤖 AI 智能功能

#### 1. AI 智能拆分 💰

基于KG笔记法，让AI帮你智能分析并拆分笔记。

- **智能分析**：AI会分析笔记内容，识别核心主题，判断是否需要拆分
- **AI拆分**：如需要拆分，AI自动按拆分建议进行拆分
- **智能内容提取**：严格从原文提取内容，避免虚增或修改
- **模板智能应用**：拆分后的笔记自动应用相应模板并组织内容结构

**使用方式**：

- 选中文本后执行 `AI 智能拆分` 命令，可手动拆分到新笔记
- 无选中文本时执行命令，AI会分析全篇并提供拆分建议
    - 支持确认执行，自动创建多篇符合命名规范的笔记

#### 2. AI 智能分类

根据笔记内容，智能推荐最合适的分类位置。

- **多种分类模式**：支持内置中图法、用户自定义分类法、自适应分类三种模式
- **智能匹配**：基于分类内容匹配最合适的分类路径
- **高度可配置**：支持自定义分类法文件和文件夹结构

**使用方式**：在任意笔记中执行 `AI 智能分类` 命令

#### 3. AI 智能命名 💰

告别为笔记命名而烦恼，AI像专业的知识管理分析师一样为你建议精准标题。

- **智能识别**：自动区分"概念笔记"与"关系笔记"
- **多AI模型支持**：支持Google Gemini和DeepSeek

**使用方式**：在任意笔记中执行 `AI 智能命名` 命令

#### 4. AI 智能别名 💰

根据当前笔记标题，按照叙词法中的非正式叙词规则生成智能别名建议。

- **叙词法标准**：严格按照图书情报学叙词法标准实现别名生成规则
- **智能判断**：自动判断标题是否适合设置别名，避免为不合适的标题生成别名
- **多种别名类型**：支持同义词、近义词、简称/缩略词、全称/完整形式、不同表达方式等
- **一键添加**：支持将建议的别名一键添加到笔记的frontmatter中
- **质量控制**：别名数量控制在1-3个，确保语义相关性和实用性

**使用方式**：在任意笔记中执行 `AI 智能别名` 命令（快捷键：`Alt + L`）

#### 5. 插入模板

快速为空白笔记应用预设的概念或关系模板，提高笔记创建效率。

- **模板类型选择**：支持选择概念模板或关系模板
- **完整模板应用**：保留模板的完整内容，包括YAML frontmatter
- **智能替换确认**：如果笔记已有内容，会询问是否替换
- **键盘导航**：支持上下箭头键选择模板类型，Enter确认，Escape取消

**使用方式**：在任意笔记中执行 `插入模板` 命令（快捷键：`Alt + T`）

### 🔗 创建与链接功能

#### 6. 智能创建与链接笔记

选中文本，一键完成“创建/链接”操作，让笔记的生成与引用行云流水。

- **工作方式**:

    1. 在任何笔记中选中一段文字（如“手机成瘾”）。
    2. 执行命令（或使用快捷键）。
    3. 如果名为 `手机成瘾.md` 的笔记**已存在**，插件会自动将选中的文字转换为内部链接 `[[手机成瘾]]`。
    4. 如果笔记**不存在**，插件会使用你预设的模板自动创建 `手机成瘾.md`，然后再将选中的文字转换为链接。（这个功能对别名也是生效的，即选中的文本是笔记的别名也可以正确链接。）
- **相关命令**:
    - `创建或链接概念笔记` (默认快捷键: `Alt + C`)
    - `创建或链接关系笔记` (默认快捷键: `Alt + R`)

#### 7. 快捷创建关系笔记 (`@@` 触发)

这是插件的标志性功能。通过简单的 `@@` 语法，可以在任何地方快速创建结构化的关系笔记，并自动完成大部分配置工作。

- **使用语法**: `@@<关系类型>;<头部概念>;<尾部概念>`
- **关系类型缩写**:

| 缩写 | 完整名称 | 示例 (`@@a;b;c`) 生成的标题 |
| :--: | :------: | :------------------------- |
| `a`  |  `关联`  | `b-关联-c`                 |
| `c`  |  `对比`  | `b-对比-c`                 |
| `i`  |  `影响`  | `b-影响-c`                 |
| `u`  |  `应用`  | `b-应用-c`                 |

- **高级用法**:

    - **多对一/多对多**: 头部、尾部概念如果有多个概念，概念之间可以使用 `_`、`,` 或 `，` 分隔。
    - **示例**: 输入 `@@i;父母控制,家庭环境;青少年手机成瘾`
    - **结果**: 自动创建一篇标题为 `父母的控制_家庭环境-影响-青少年手机成瘾.md` 的新笔记，并将输入的语法替换为指向该笔记的链接。

#### 8. 自动化双向链接

这是`快捷创建`功能的延伸，旨在解决“链接孤岛”问题，真正实现知识的互联互通。

- **工作方式**: 当你使用 `@@` 语法成功创建一篇关系笔记（如 `A-影响-B`）后，插件会自动执行以下操作：
    1. 打开 `A.md` 笔记。
    2. 找到你在设置中为“影响”关系指定的**头部章节**（默认为 `# 影响`）。
    3. 在该章节末尾追加一行 `- [[A-影响-B]]`。
    4. 打开 `B.md` 笔记。
    5. 找到指定的**尾部章节**（默认为 `# 影响因素`）。
    6. 在该章节末尾追加一行 `- [[A-影响-B]]`。
- **高度可配置**: 每种关系类型（影响、对比、关联、应用）的头部和尾部目标章节都可以在插件设置中自由定义。

#### 8. 属性继承

遵循 "Don't Repeat Yourself" (DRY) 原则，让知识的层级结构更加清晰，减少信息冗余。

- **工作方式**:
    1. 在一篇“子概念”笔记（如 `[[红米K80]]`）的 frontmatter 中，通过 `parent` 属性（可以自行指定）指向一篇“父概念”笔记（如 `parent: [[手机]]`）。
    2. 在 `[[红米K80]]` 笔记中执行命令。
    3. 插件会自动读取 `[[手机]]` 笔记的 frontmatter，并将其中尚未存在的属性添加进来。
- **两种模式**:
    - **Full (继承属性与值)**: 复制父笔记的属性和对应的属性值。
    - **Structure (仅继承属性)**: 只复制父笔记的属性名，属性值为空，方便你填充。
- **相关命令**: `从父笔记继承属性` (默认快捷键: `Alt + I`)

#### 9. 反向别名补全

对于“关联”和“对比”这类无方向性的关系，自动添加反向别名可以极大地优化链接和搜索体验。

- **工作方式**:
    - 当前笔记标题为 `印象笔记-对比-Obsidian`。
    - 执行命令后，插件会自动为这篇笔记的 frontmatter 添加一个别名 `aliases: [Obsidian-对比-印象笔记]`。
- **效果**: 无论你链接 `[[印象笔记-对比-Obsidian]]` 还是 `[[Obsidian-对比-印象笔记]]`，都会指向同一篇笔记。
- **相关命令**: `为关系笔记补全反向别名` (默认快捷键: `Alt + A`)

## ⚙️ 安装与配置

### 安装

如果本插件未来上架 Obsidian 插件市场的话：

1. 在 Obsidian 的 `设置` -> `第三方插件` 中，关闭安全模式。
2. 点击 `社区插件` 旁的 `浏览` 按钮，搜索 "ThoughtWeaver Pilot" 并安装。
3. 在 `第三方插件` 列表中启用本插件。

（对于手动安装，请将 `main.js`, `manifest.json`, `styles.css` 文件放入你的 Obsidian 仓库下的 `.obsidian/plugins/kg-helper` 文件夹中。）

### 配置

插件的大部分核心功能都可以通过设置页面进行个性化定制，主要包括：

#### 🤖 AI 配置

- **AI 服务商**: 选择 Google Gemini 或 DeepSeek 作为AI服务提供商
- **API 密钥**: 配置对应服务商的API密钥，支持测试连接功能
- **分类模式**: 选择智能分类的模式（内置中图法/自定义分类法/自适应分类）

#### 📝 笔记管理配置

- **模板路径**: 为概念笔记和关系笔记分别指定模板文件
- **存放位置**: 设定新笔记是保存在当前目录下，还是一个固定的默认目录（如 `Inbox`）
- **属性继承**: 自定义用于声明父子关系的 frontmatter 键名（默认为 `parent`）以及继承模式
- **自动链接**: 启用/禁用自动化双向链接功能，并为四种关系类型精确指定链接插入的章节名

#### ⌨️ 快捷键配置

所有命令都支持自定义快捷键，默认快捷键包括：

- `Alt + C`: 创建或链接概念笔记
- `Alt + R`: 创建或链接关系笔记
- `Alt + I`: 从父笔记继承属性
- `Alt + A`: 为关系笔记补全反向别名
- `Alt + S`: AI 智能拆分
- `Alt + L`: AI 智能别名
- `Alt + T`: 插入模板

## 🚀 快速开始

### 第一次使用

1. **配置AI服务**：在设置中配置Google Gemini或DeepSeek的API密钥
2. **设置模板**：为概念笔记和关系笔记配置模板文件
3. **尝试AI功能**：在任意笔记中执行`AI 智能命名`、`AI 智能拆分`或`AI 智能别名`命令
4. **体验核心功能**：选中文本后使用`Alt + C`或`Alt + R`创建链接
5. **管理许可证**：如需使用付费功能，可在设置中管理支持码

### 推荐工作流

1. **收集阶段**：使用`@@`语法快速创建关系笔记
2. **整理阶段**：使用AI智能拆分功能分解复杂笔记
3. **优化阶段**：使用AI智能命名、分类和别名功能完善笔记结构
4. **维护阶段**：使用属性继承和反向别名补全功能保持知识网络整洁

## 📚 相关资源

- [KG笔记法入门教程](https://publish.obsidian.md/ryooo/G_%E6%96%87%E5%8C%96%E3%80%81%E7%A7%91%E5%AD%A6%E3%80%81%E6%95%99%E8%82%B2%E3%80%81%E4%BD%93%E8%82%B2/KG%E7%AC%94%E8%AE%B0%E6%B3%95%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B)
- [更新日志](CHANGELOG.md)
- [问题反馈](https://github.com/your-repo/issues)

---

希望这份 README 能帮助你更好地使用 ThoughtWeaver Pilot，构建属于你自己的强大知识网络！🎉